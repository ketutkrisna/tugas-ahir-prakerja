<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <title>Game Prakerja</title>
    <style>
      body {
        overflow: hidden;
      }
      .kotakpembatas {
        width: 100%;
        height: 80vh;
        background:linear-gradient(#eee,#bbb);
        cursor:pointer;
        box-shadow:0 0 9px rgba(0,0,0,.8);
        border-radius:10px;
        position:relative;
      }
      .sasuke {
        width:158px;
        height:230px;
        background-image:url(img/sasukekun3.png);
        transition:2s;
        position:relative;
      }
      .sasukeright {
        width:158px;
        height:230px;
        background-image:url(img/sasukekun3.png);
        animation: runright .4s steps(5) infinite;
        transition:2s;
        position:relative;
      }
      .sasukeleft {
        width:158px;
        height:230px;
        background-image:url(img/sasukekun3.png);
        animation: runleft .4s steps(5) infinite;
        transition:2s;
        position:relative;
      }

      .tipegerak {
        display: flex;
        justify-content: center;
      }
      .btn {
        margin: 5px;
      }
      h4 {
        background-color:#eee;
        display:inline;
        padding:5px;
        border-radius:5px;
        box-shadow:0 0 9px rgba(0,0,0,.6);
      }
      .pilihTipe {
        width:95px;
        box-shadow:0 0 9px rgba(0,0,0,.6);
      }
      .targetcari {
        width: 100px;
        height: 100px;
        border-radius:50%;
        background-color: #e02b2b;
        position: absolute;
        opacity: 0;
        box-shadow:0 0 9px rgba(0,0,0,.6);
      }
      .mulai {
        box-shadow:0 0 9px rgba(0,0,0,.6);
      }
      .pembungkustimeklik {
        position:absolute;
        top:10px;
        left:5px;
      }
      .hitungWaktu, .jumlahKlik {
        padding:5px 7px 5px 7px;
        background-color:rgba(255,255,255,.6);
        box-shadow:0 0 4px rgba(0,0,0,.5);
        border-radius:5px;
        font-size: 17px;
      }
      .start {
        box-shadow:0 0 9px rgba(0,0,0,.6);
      }
      .textcontainer {
        position:absolute;
        left:0;
        right:0;
        bottom: 0;
        top:200px;
        font-size:40px;
        text-align:center;
        font-weight:bold;
        display: none;
        z-index: 100;
        color: #eee;
        text-shadow:0 0 6px rgba(0,0,0,.8);
      }

      @keyframes runright {
        0%{
          background-position: 0 0;
        }
        100%{
          background-position: -764px 0px;
        }
      }
      @keyframes runleft {
        0%{
          background-position: -764px 210px;
        }
        100%{
          background-position: 0 210px;
        }
      }
    </style>
  </head>
  <body>

    <div class="container text-center mt-4 mb-2">
      <h4>Tugas Ahir</h4>
    </div>
    <div class="container">
    <div class="d-flex justify-content-between" style="text-align: center;">
      <div>
        <button class="btn-sm btn btn-primary start mulai mb-2">Mulai</button>
      </div>
      
      <select class="form-select form-select-sm mb-2 pilihTipe text-right" aria-label=".form-select-sm example">
        <option value="gerakLari">Lari</option>
        <option value="gerakLoncat">Loncat</option>
      </select>
    </div>
    <div class="kotakpembatas">
      <div class="pembungkustimeklik">
        <span class="hitungWaktu"></span>
        <span class="jumlahKlik"></span>
      </div>
      <div class="textcontainer">MULAI!!!</div>
      <div class="sasuke" data-aos="zoom-in-down" data-aos-duration="3000"></div>
      <div class="targetcari"></div>
    </div>

      <div class="row">
      <span class="text-center">Create by : Ketut Krisna</span>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script>
      $(function(){

        var jumlahKlik = 0;
        $('.targetcari').hide();
        $('.hitungWaktu').hide();
        $('.jumlahKlik').hide();
        $('.mulai').on('click',function(){
          waktu = 121;
          jumlahKlik = 0;
          $('.hitungWaktu').fadeIn();
          $('.jumlahKlik').fadeIn();
          $('.hitungWaktu').text('Sisa Waktu : 120');
          $('.jumlahKlik').text('Hasil : 0');
          $('.start').text('Sedang dalam game');
          $('.start').removeClass('mulai');
          $('.start').addClass('disabled');
          $('.textcontainer').text('MULAI!!!');
          $('.textcontainer').fadeIn();
          var setWaktu = setInterval(function(){
            waktu--;
            if(waktu >= 0){
              $('.textcontainer').fadeOut();
              $('.targetcari').show();
              $('.hitungWaktu').text('Sisa Waktu : '+waktu);
            }else{
              clearInterval(setWaktu);
              $('.textcontainer').fadeIn();
              $('.textcontainer').text('SELESAI!!!');
              setTimeout(function() {
                $('.textcontainer').fadeOut();
              }, 800);
              $('.start').text('Ulangi');
              $('.start').addClass('mulai');
              $('.start').removeClass('disabled');
              $('.hitungWaktu').text('Sisa Waktu : Habis!');
              $('.targetcari').hide();
            }
          },1000);

        });


        $('.targetcari').on('mouseover',function(e){
          $('.targetcari').css('opacity','1');
          $('.targetcari').css('transition','1s');
        });
        $('.targetcari').on('mouseleave',function(e){
          $('.targetcari').css('opacity','0');
          $('.targetcari').css('transition','1s');
        });

        var horLine = $(".kotakpembatas").width();
        var verLine = $(".kotakpembatas").height();
        var randomWidth = Math.floor(Math.random() * (horLine-100));
        var randomHeight = Math.floor(Math.random() * (verLine-100));
        $('.targetcari').css({
          'top':randomHeight,
          'left':randomWidth
        });

        
        $('.targetcari').on('click',function(e){
          jumlahKlik++;
          $('.jumlahKlik').text('Hasil : '+jumlahKlik);
          $('.targetcari').css('opacity','1');
          $('.targetcari').css('transition','.4s');
          setTimeout(function() {
            $('.targetcari').css('opacity','0');
            $('.targetcari').css({
              'top':'0',
              'left':'0',
              'transition':'unset'
            });
          }, 500);
          setTimeout(function() {
            var horLine = $(".kotakpembatas").width();
            var verLine = $(".kotakpembatas").height();
            var randomWidth = Math.floor(Math.random() * (horLine-50));
            var randomHeight = Math.floor(Math.random() * (verLine-50));
            $('.targetcari').css('transform','translate('+ randomWidth +'px ,'+ randomHeight +'px)');
          }, 600);
          
        });


        

        var posAwal=0;
        var posAwalY=0;

        $('.kotakpembatas').on('click',function(e){
          var parentOffset = $(this).parent().offset(); 
          var posX = e.pageX - parentOffset.left;
          var posY = e.pageY - parentOffset.top;
          var pilihTipe = $('.pilihTipe').val();
          if(pilihTipe == 'gerakLari'){
            $('.sasuke').css('transform','translate('+ (posX-100) +'px ,'+ (posY-110) +'px)');
          }else{
            setTimeout(function() {
              $('.sasuke').css('transform','translate('+ (posX-100) +'px ,'+ (posY-110) +'px)');
            }, 1500);
          }
          pengkondisian(posX, posY, pilihTipe);
        });

        function pengkondisian(posX, posY, pilihTipe){
          if(pilihTipe == 'gerakLari'){
            if(posX > posAwal){
              posAwal = posX;
              $('.sasuke').addClass('sasukeright');
              $('.sasuke').removeClass('sasukeleft');
              $('.sasuke').css('animation-play-state','running');
              setTimeout(function() {
                if(posAwal == posX){
                  $('.sasuke').css('animation-play-state','paused');
                }
              }, 2000);
            }else{
              posAwal = posX;
              $('.sasuke').addClass('sasukeleft');
              $('.sasuke').removeClass('sasukeright');
              $('.sasuke').css('animation-play-state','running');
              setTimeout(function() {
                if(posAwal == posX){
                  $('.sasuke').css('animation-play-state','paused');
                }
              }, 2000);
            }
          }else{
            if(posX > posAwal){
              posAwal = posX;
              $('.sasuke').fadeOut(200);
              $('.sasuke').css('animation-play-state','running');
                $('.sasuke').addClass('sasukeright');
                $('.sasuke').removeClass('sasukeleft');
              setTimeout(function() {
                $('.sasuke').fadeIn(200);
                $('.sasuke').css('animation-play-state','paused');
              }, 200);
              setTimeout(function() {
                $('.sasuke').css('animation-play-state','running');
              }, 1400);
              setTimeout(function() {
                $('.sasuke').css('animation-play-state','paused');
              }, 1600);
            }else{
              posAwal = posX;
              $('.sasuke').fadeOut(200);
              $('.sasuke').css('animation-play-state','running');
                $('.sasuke').addClass('sasukeleft');
                $('.sasuke').removeClass('sasukeright');
              setTimeout(function() {
                $('.sasuke').fadeIn(200);
                $('.sasuke').css('animation-play-state','paused');
              }, 200);
              setTimeout(function() {
                $('.sasuke').css('animation-play-state','running');
              }, 1400);
              setTimeout(function() {
                $('.sasuke').css('animation-play-state','paused');
              }, 1600);
            }
          }
        }

      });
    </script>
  </body>
</html>